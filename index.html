<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>RED PRO | GLOBAL HUB</title>
    <style>
        :root { --main-red: #ff0000; --bg: #050000; --gold: #ffd700; }
        body, html { margin: 0; padding: 0; background: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }

        /* NAVBAR */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--main-red); }
        .nav-links span { margin: 0 15px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .nav-links span:hover { color: var(--main-red); }

        /* OVERLAYS */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.98); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; }
        .box { width: 500px; padding: 30px; border: 1px solid var(--main-red); background: #080000; text-align: center; position: relative; }

        /* LOBİ LİSTESİ */
        #lobby-render { width: 100%; max-height: 300px; overflow-y: auto; margin: 20px 0; border: 1px solid #222; }
        .lobby-card { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #222; background: #111; margin-bottom: 5px; }

        /* BUTONLAR */
        .btn { padding: 10px 20px; border: 1px solid var(--main-red); background: transparent; color: white; cursor: pointer; font-weight: bold; }
        .btn:hover { background: var(--main-red); box-shadow: 0 0 15px var(--main-red); }
        .admin-tag { color: var(--gold); border: 1px solid var(--gold); padding: 2px 5px; font-size: 10px; text-transform: uppercase; }

        /* PROFİL PP */
        .pp-nav { width: 35px; height: 35px; border-radius: 50%; border: 1px solid var(--main-red); vertical-align: middle; object-fit: cover; }
        input { width: 100%; padding: 10px; margin: 10px 0; background: #111; border: 1px solid #333; color: white; box-sizing: border-box; }
    </style>
</head>
<body>

<nav>
    <div class="logo" style="font-size: 24px; color: var(--main-red); font-weight: bold;">RED PRO</div>
    <div class="nav-links">
        <span onclick="show('shopView')">MAĞAZA</span>
        <span onclick="show('lobbyView')">LOBİLER</span>
        <span id="admin-link" style="display:none; color:var(--gold)" onclick="show('adminView')">ADMİN PANEL</span>
        <span id="user-info" onclick="show('profileView')" style="display:none;">
            <img id="nav-pp" src="" class="pp-nav" style="display:none;">
            <span id="nav-name"></span>
        </span>
        <button id="login-btn" class="btn" onclick="show('loginView')">GİRİŞ</button>
    </div>
</nav>

<div style="height: 90vh; display: flex; flex-direction: column; align-items: center; justify-content: center;">
    <h1 style="font-size: 4rem; letter-spacing: 10px; margin: 0;">GLOBAL ACCESS</h1>
    <p style="color: #444;">LOBİLER ARTIK AKTİF. ARKADAŞLARINI BUL.</p>
</div>

<div id="loginView" class="overlay">
    <div class="box">
        <h2>SİSTEME GİRİŞ</h2>
        <input type="text" id="u" placeholder="Kullanıcı Adı">
        <input type="password" id="p" placeholder="Şifre">
        <button class="btn" onclick="login()">BAĞLAN</button>
    </div>
</div>

<div id="shopView" class="overlay">
    <div class="box">
        <h2 style="color: var(--main-red);">HİLE MAĞAZASI</h2>
        <div class="lobby-card"><span>ExLoader Premium</span> <button class="btn" onclick="location.href='https://data.exloader.net/ExLoader_Installer.exe'">İNDİR</button></div>
        <div class="lobby-card"><span>SharkHack Legit</span> <button class="btn" onclick="location.href='https://data.exloader.net/ExLoader_Installer.exe'">İNDİR</button></div>
        <button class="btn" onclick="hide()">KAPAT</button>
    </div>
</div>

<div id="lobbyView" class="overlay">
    <div class="box" style="width: 600px;">
        <h2>AKTİF OYUNCU LOBİLERİ</h2>
        <div id="lobby-render"></div>
        <button class="btn" onclick="show('createView')">LOBİ OLUŞTUR</button>
        <button class="btn" onclick="hide()">KAPAT</button>
    </div>
</div>

<div id="createView" class="overlay">
    <div class="box">
        <h2>LOBİ KUR</h2>
        <input type="text" id="l-name" placeholder="Lobi Adı...">
        <button class="btn" onclick="createLobby()">YAYINLA</button>
        <button class="btn" onclick="show('lobbyView')">İPTAL</button>
    </div>
</div>

<div id="profileView" class="overlay">
    <div class="box">
        <h2>PROFİLİ DÜZENLE</h2>
        <input type="file" accept="image/*" onchange="setPP(this)">
        <input type="text" id="new-u" placeholder="Yeni Ad">
        <input type="password" id="new-p" placeholder="Yeni Şifre">
        <button class="btn" onclick="saveProfile()">KAYDET</button>
        <button class="btn" onclick="localStorage.clear(); location.reload();">LOGOUT</button>
        <button class="btn" onclick="hide()">GERİ</button>
    </div>
</div>

<div id="adminView" class="overlay">
    <div class="box">
        <h2 style="color: var(--gold);">YÖNETİCİ KONTROLÜ</h2>
        <button class="btn" style="border-color: yellow;" onclick="clearLobbies()">TÜM LOBİLERİ SİL</button>
        <button class="btn" onclick="hide()">KAPAT</button>
    </div>
</div>

<script>
    const ADM = ["syvex", "tanrımbenibaştanyaratsın"];
    
    function show(id) { hide(); document.getElementById(id).style.display = 'flex'; if(id==='lobbyView') render(); }
    function hide() { document.querySelectorAll('.overlay').forEach(e => e.style.display = 'none'); }

    function login() {
        let user = document.getElementById('u').value;
        if(!user) return;
        localStorage.setItem('logged', 'true');
        localStorage.setItem('user', user);
        location.reload();
    }

    function createLobby() {
        let n = document.getElementById('l-name').value;
        if(!n) return;
        let list = JSON.parse(localStorage.getItem('GLOBAL_LOBBIES') || "[]");
        list.push({ name: n, owner: localStorage.getItem('user'), id: Date.now() });
        localStorage.setItem('GLOBAL_LOBBIES', JSON.stringify(list));
        show('lobbyView');
    }

    function render() {
        let container = document.getElementById('lobby-render');
        container.innerHTML = "";
        let list = JSON.parse(localStorage.getItem('GLOBAL_LOBBIES') || "[]");
        let curUser = localStorage.getItem('user').toLowerCase();

        list.forEach((l, idx) => {
            let isOwner = (l.owner.toLowerCase() === curUser || ADM.includes(curUser));
            container.innerHTML += `
                <div class="lobby-card">
                    <span><b>${l.name}</b> <small>(${l.owner})</small></span>
                    <div>
                        <button class="btn" onclick="alert('Lobiye Katıldın!')">KATIL</button>
                        ${isOwner ? `<button class="btn" style="border-color:orange" onclick="delLobby(${idx})">SİL</button>` : ''}
                    </div>
                </div>`;
        });
    }

    function delLobby(idx) {
        let list = JSON.parse(localStorage.getItem('GLOBAL_LOBBIES'));
        list.splice(idx, 1);
        localStorage.setItem('GLOBAL_LOBBIES', JSON.stringify(list));
        render();
    }

    function clearLobbies() { localStorage.setItem('GLOBAL_LOBBIES', "[]"); render(); }

    function setPP(el) {
        let reader = new FileReader();
        reader.onload = (e) => localStorage.setItem('user_pp', e.target.result);
        reader.readAsDataURL(el.files[0]);
    }

    function saveProfile() {
        let n = document.getElementById('new-u').value;
        if(n) localStorage.setItem('user', n);
        location.reload();
    }

    // OTOMATİK YÜKLEME VE KONTROL
    window.onload = () => {
        if(localStorage.getItem('logged')) {
            let user = localStorage.getItem('user');
            document.getElementById('login-btn').style.display = 'none';
            document.getElementById('user-info').style.display = 'inline';
            document.getElementById('nav-name').innerText = user;
            
            if(ADM.includes(user.toLowerCase())) {
                document.getElementById('admin-link').style.display = 'inline';
                document.getElementById('nav-name').innerHTML += ' <span class="admin-tag">ADMIN</span>';
            }

            let pp = localStorage.getItem('user_pp');
            if(pp) {
                let img = document.getElementById('nav-pp');
                img.src = pp; img.style.display = 'inline';
            }
        }
    };

    // ARKADAŞININ LOBİSİNİ GÖREBİLMEN İÇİN HER 3 SANİYEDE BİR LİSTEYİ ARKADA GÜNCELLE
    setInterval(() => { if(document.getElementById('lobbyView').style.display === 'flex') render(); }, 3000);

</script>
</body>
</html>
