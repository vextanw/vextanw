<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Arxon NW</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Arial;
  background:#020617;
  color:white;
}
nav{
  background:rgba(0,0,0,.6);
  padding:15px 25px;
  display:flex;
  justify-content:space-between;
}
input,button{
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:8px;
  border:none;
}
button{
  background:#0ea5e9;
  color:black;
  font-weight:bold;
  cursor:pointer;
}
button:hover{opacity:.9}
.box{
  max-width:400px;
  margin:40px auto;
  background:#020617;
  border:1px solid #0ea5e9;
  padding:20px;
  border-radius:12px;
}
.hidden{display:none}
.card{
  border:1px solid #0ea5e9;
  padding:10px;
  border-radius:8px;
  margin-bottom:8px;
}
</style>
</head>

<body>

<nav>
  <b>Arxon NW</b>
  <div id="navBtn"></div>
</nav>

<!-- AUTH -->
<div id="auth" class="box">
  <h2>Giriş</h2>
  <input id="loginUser" placeholder="Kullanıcı adı">
  <input id="loginPass" type="password" placeholder="Şifre">
  <button onclick="login()">Giriş Yap</button>

  <hr style="margin:20px 0;border-color:#0ea5e9">

  <h2>Kayıt Ol</h2>
  <input id="regUser" placeholder="Kullanıcı adı">
  <input id="regPass" type="password" placeholder="Şifre">
  <button onclick="register()">Kayıt Ol</button>

  <p id="msg"></p>
</div>

<!-- PANEL -->
<div id="panel" class="box hidden">
  <h2>Hoş geldin <span id="who"></span></h2>

  <div id="adminPanel" class="hidden">
    <h3>Duyuru At (syvex)</h3>
    <input id="annText" placeholder="Duyuru yaz">
    <button onclick="addAnn()">Gönder</button>
  </div>

  <h3>Duyurular</h3>
  <div id="anns"></div>

  <button onclick="logout()">Çıkış</button>
</div>

<script>
// -------- INIT --------
if(!localStorage.users){
  localStorage.users = JSON.stringify({
    syvex:{password:"1234",role:"admin"}
  });
}
if(!localStorage.anns){
  localStorage.anns="[]";
}

// -------- AUTH --------
function login(){
  const u=loginUser.value;
  const p=loginPass.value;
  const users=JSON.parse(localStorage.users);

  if(!users[u] || users[u].password!==p){
    msg.innerText="Hatalı kullanıcı veya şifre";
    return;
  }
  localStorage.currentUser=u;
  loadPanel();
}

function register(){
  const u=regUser.value;
  const p=regPass.value;
  const users=JSON.parse(localStorage.users);

  if(!u || !p){
    msg.innerText="Boş bırakma";
    return;
  }
  if(users[u]){
    msg.innerText="Bu kullanıcı var";
    return;
  }

  users[u]={password:p,role:"user"};
  localStorage.users=JSON.stringify(users);
  localStorage.currentUser=u;
  loadPanel();
}

function logout(){
  localStorage.removeItem("currentUser");
  location.reload();
}

// -------- PANEL --------
function loadPanel(){
  auth.classList.add("hidden");
  panel.classList.remove("hidden");

  const u=localStorage.currentUser;
  who.innerText=u;

  const users=JSON.parse(localStorage.users);
  if(users[u].role==="admin"){
    adminPanel.classList.remove("hidden");
  }

  loadAnns();
}

function loadAnns(){
  anns.innerHTML="";
  JSON.parse(localStorage.anns).forEach(a=>{
    anns.innerHTML+=`<div class="card">${a}</div>`;
  });
}

function addAnn(){
  const arr=JSON.parse(localStorage.anns);
  arr.unshift(annText.value);
  localStorage.anns=JSON.stringify(arr);
  annText.value="";
  loadAnns();
}

// -------- AUTO --------
if(localStorage.currentUser){
  loadPanel();
}
</script>

</body>
</html>
