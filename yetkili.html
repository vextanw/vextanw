<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Yetkili Paneli | ArxonNetwork</title>

<style>
body {
  background:#0f2027;
  color:white;
  font-family:Arial;
  padding:30px;
}
h2,h3 { color:#00c6ff; }
.box {
  background:rgba(0,0,0,0.5);
  padding:20px;
  border-radius:15px;
  max-width:450px;
  margin-bottom:30px;
}
input,button {
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:20px;
  border:none;
}
button {
  background:#00c6ff;
  font-weight:bold;
  cursor:pointer;
}
.app {
  background:rgba(0,0,0,0.6);
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
  border-left:4px solid #00c6ff;
}
.app b { color:#7b6cff; }
.app small { opacity:0.7; }
.action-btns button {
  width:48%;
  margin:5px 1%;
}
.ok { background:#2ecc71; }
.no { background:#e74c3c; }
</style>
</head>

<body>

<h2>ğŸ‘® Yetkili Paneli</h2>
<div id="adminName"></div>

<div class="box">
  <input id="target" placeholder="KullanÄ±cÄ± adÄ±">
  <input id="credit" type="number" placeholder="Verilecek kredi">
  <button onclick="giveCredit()">ğŸ’³ Kredi Ver</button>
  <button onclick="banUser()">â›” Banla</button>
  <button onclick="unbanUser()">âœ… Ban AÃ§</button>
  <button onclick="logout()">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
</div>

<div class="section">
  <h2>ğŸ›¡ AAC BaÅŸvurularÄ±</h2>
  <div id="aacList"></div>
</div>

<h2>ğŸ“˜ Rehber BaÅŸvurularÄ±</h2>
<div id="rehberList"></div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const aacEl = document.getElementById("aacList");
  const rehberEl = document.getElementById("rehberList");

  let foundAAC = false;
  let foundRehber = false;

  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);

    if (!key.startsWith("applications_")) continue;

    const nick = key.replace("applications_", "");
    const apps = JSON.parse(localStorage.getItem(key)) || [];

    apps.forEach((a, index) => {
      const box = `
        <div class="app">
          <b>Nick:</b> ${nick}<br>
          <b>TÃ¼r:</b> ${a.type}<br>
          <b>Durum:</b> ${a.status}<br>
          <small>${a.date}</small><br><br>

          <button onclick="approve('${key}', ${index})">âœ… Onayla</button>
          <button onclick="reject('${key}', ${index})">âŒ Reddet</button>
          <button onclick="removeApp('${key}', ${index})">ğŸ—‘ Sil</button>
        </div>
      `;

      if (a.type === "AAC") {
        foundAAC = true;
        aacEl.innerHTML += box;
      }

      if (a.type === "REHBER") {
        foundRehber = true;
        rehberEl.innerHTML += box;
      }
    });
  }

  if (!foundAAC) aacEl.innerHTML = "<p>AAC baÅŸvurusu yok.</p>";
  if (!foundRehber) rehberEl.innerHTML = "<p>Rehber baÅŸvurusu yok.</p>";
});

/* ==== DURUM ==== */
function approve(key, i) {
  const list = JSON.parse(localStorage.getItem(key));
  list[i].status = "OnaylandÄ±";
  localStorage.setItem(key, JSON.stringify(list));
  location.reload();
}

function reject(key, i) {
  const list = JSON.parse(localStorage.getItem(key));
  list[i].status = "Reddedildi";
  localStorage.setItem(key, JSON.stringify(list));
  location.reload();
}

function removeApp(key, i) {
  const list = JSON.parse(localStorage.getItem(key));
  list.splice(i, 1);
  localStorage.setItem(key, JSON.stringify(list));
  location.reload();
}
</script>


</body>
</html>
