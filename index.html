<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RED PRO | Admin & Hub</title>
    <style>
        :root { --main-red: #ff0000; --bg-black: #050000; --panel-bg: rgba(8, 0, 0, 0.98); --admin-gold: #ffd700; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg-black); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }

        @keyframes redToWhite { 0%, 100% { color: var(--main-red); text-shadow: 0 0 15px var(--main-red); } 50% { color: #ffffff; text-shadow: 0 0 20px rgba(255, 255, 255, 0.6); } }
        .animated-text { animation: redToWhite 3s infinite ease-in-out; }

        nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 8%; position: fixed; width: 84%; top: 0; z-index: 100; background: rgba(0,0,0,0.9); border-bottom: 1px solid rgba(255,0,0,0.2); }
        .btn { padding: 10px 20px; border: 1px solid var(--main-red); background: transparent; color: white; cursor: pointer; transition: 0.4s; font-weight: bold; }
        .btn:hover { background: var(--main-red); box-shadow: 0 0 15px var(--main-red); }

        .full-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--panel-bg); z-index: 1000; display: none; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(20px); }
        
        /* LOBÄ° VE CHAT DÃœZENÄ° */
        .chat-container { display: flex; width: 90%; height: 80vh; border: 1px solid #222; margin-top: 50px; }
        .sidebar { width: 250px; border-right: 1px solid #222; background: rgba(255,255,255,0.02); padding: 15px; overflow-y: auto; }
        .main-chat { flex: 1; display: flex; flex-direction: column; padding: 15px; }
        
        .user-card { display: flex; align-items: center; gap: 10px; padding: 8px; border-bottom: 1px solid #111; font-size: 14px; }
        .admin-tag { color: var(--admin-gold); font-weight: bold; font-size: 10px; border: 1px solid var(--admin-gold); padding: 2px 4px; border-radius: 3px; }

        .lobby-item { background: #111; border: 1px solid #333; padding: 15px; margin: 10px 0; width: 400px; display: flex; justify-content: space-between; align-items: center; }
        
        /* AI WIDGET */
        #ai-box { position: fixed; bottom: 100px; right: 30px; width: 300px; height: 350px; background: #080000; border: 1px solid var(--main-red); display: none; flex-direction: column; z-index: 2001; }
        .ai-msgs { flex: 1; padding: 10px; overflow-y: auto; font-size: 12px; color: #ccc; }

        .pp-circle { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--main-red); overflow: hidden; display: flex; justify-content: center; align-items: center; background: #000; }
        .pp-circle img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>

    <nav>
        <div class="logo">RED<span>PRO</span></div>
        <div style="display:flex; gap:20px; align-items:center;">
            <span onclick="toggleView('shopView')">MAÄžAZA</span>
            <span onclick="toggleView('lobbyListView')">LOBÄ°LER</span>
            <div id="user-info" style="display:none; align-items: center; gap: 10px;" onclick="toggleView('profileView')">
                <span id="nav-username" class="animated-text"></span>
                <div class="pp-circle" id="nav-pp">?</div>
            </div>
            <button id="loginBtn" class="btn" onclick="toggleView('loginView')">GÄ°RÄ°Åž</button>
        </div>
    </nav>

    <main style="height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center;">
        <h1 class="animated-text" style="font-size: 5rem; letter-spacing: 15px;">RED CORE</h1>
        <p id="ban-msg" style="color:#555;">HOÅž GELDÄ°NÄ°Z OPERATÃ–R.</p>
    </main>

    <div id="ai-box">
        <div style="background:var(--main-red); padding:8px; font-weight:bold;">RED AI (Self-Learning)</div>
        <div class="ai-msgs" id="ai-content"><div>AI: Senden yeni ÅŸeyler Ã¶ÄŸrenmeye hazÄ±rÄ±m. Bana bir ÅŸey Ã¶ÄŸretmek iÃ§in "Ã–ÄŸret: [soru] | [cevap]" yazabilirsin.</div></div>
        <input type="text" id="ai-in" placeholder="Bir ÅŸey yaz veya Ã¶ÄŸret..." onkeypress="if(event.key==='Enter') aiProcess()" style="width:100%; background:#111; color:white; border:none; padding:10px;">
    </div>
    <button onclick="document.getElementById('ai-box').style.display=document.getElementById('ai-box').style.display==='none'?'flex':'none'" style="position:fixed; bottom:30px; right:30px; width:60px; height:60px; border-radius:50%; background:var(--main-red); border:none; cursor:pointer; z-index:2002;">ðŸ¤–</button>

    <div id="lobbyListView" class="full-overlay">
        <span onclick="closeAll()" style="position:absolute; top:30px; right:30px; cursor:pointer;">âœ•</span>
        <h2 class="animated-text">AKTÄ°F LOBÄ°LER</h2>
        <div id="lobbyContainer"></div>
        <button class="btn" onclick="toggleView('createLobbyView')" style="margin-top:20px;">+ LOBÄ° OLUÅžTUR</button>
    </div>

    <div id="chatView" class="full-overlay">
        <div class="chat-container">
            <div class="sidebar">
                <h4 style="color:var(--main-red)">OYUNCULAR</h4>
                <div id="playerList"></div>
            </div>
            <div class="main-chat">
                <h3 id="chatTitle">LOBÄ°</h3>
                <div id="msgBox" style="flex:1; overflow-y:auto; padding:10px; background:rgba(0,0,0,0.2);"></div>
                <div style="display:flex; gap:10px; margin-top:10px;">
                    <input type="text" id="chatIn" placeholder="Mesaj..." onkeypress="if(event.key==='Enter') sendChat()" style="flex:1; background:#111; border:1px solid #333; color:white; padding:10px;">
                    <button class="btn" onclick="sendChat()">GÃ–NDER</button>
                </div>
                <button class="btn" onclick="toggleView('lobbyListView')" style="margin-top:10px; border-color:#333;">AYRIL</button>
            </div>
        </div>
    </div>

    <div id="shopView" class="full-overlay">
        <span onclick="closeAll()" style="position:absolute; top:30px; right:30px; cursor:pointer;">âœ•</span>
        <h1 class="animated-text">SHOP</h1>
        <div class="lobby-item"><span>ExHack Premium</span> <button class="btn" onclick="location.href='https://data.exloader.net/ExLoader_Installer.exe'">0 TL Ä°NDÄ°R</button></div>
    </div>

    <div id="loginView" class="full-overlay">
        <div style="width:300px; text-align:center;">
            <h2 class="animated-text">GÄ°RÄ°Åž</h2>
            <input type="text" id="log-u" placeholder="KullanÄ±cÄ± AdÄ±" style="width:100%; padding:10px; margin:5px 0; background:#111; color:white; border:1px solid #333;">
            <input type="password" id="log-p" placeholder="Åžifre" style="width:100%; padding:10px; margin:5px 0; background:#111; color:white; border:1px solid #333;">
            <button class="btn" style="width:100%; margin-top:10px;" onclick="login()">GÄ°RÄ°Åž YAP</button>
        </div>
    </div>

    <script>
        const ADMINS = ["Syvex", "TanrÄ±mBeniBaÅŸtanYaratsÄ±n"];
        let lobbies = JSON.parse(localStorage.getItem('real_lobbies')) || [];
        let aiBrain = JSON.parse(localStorage.getItem('ai_brain')) || { "merhaba": "Selam dostum!", "hile": "Hileler MaÄŸaza bÃ¶lÃ¼mÃ¼nde bedava!" };

        function toggleView(id) {
            if(localStorage.getItem('isLogged') !== 'true' && id !== 'loginView') return toggleView('loginView');
            closeAll();
            document.getElementById(id).style.display = 'flex';
            if(id === 'lobbyListView') renderLobbies();
        }
        function closeAll() { document.querySelectorAll('.full-overlay').forEach(e => e.style.display='none'); }

        function login() {
            const u = document.getElementById('log-u').value;
            const p = document.getElementById('log-p').value;
            if(!u || !p) return;
            localStorage.setItem('user', u);
            localStorage.setItem('pass', p);
            localStorage.setItem('isLogged', 'true');
            if(localStorage.getItem('isBanned') === u) return alert("BU HESAP BANLANMIÅžTIR!");
            location.reload();
        }

        function updateUI() {
            if(localStorage.getItem('isLogged') === 'true') {
                const user = localStorage.getItem('user');
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('user-info').style.display = 'flex';
                document.getElementById('nav-username').innerText = user;
                if(ADMINS.includes(user)) document.getElementById('nav-username').innerHTML += ' <span class="admin-tag">KURUCU</span>';
                const pp = localStorage.getItem('user_pp');
                if(pp) document.getElementById('nav-pp').innerHTML = `<img src="${pp}">`;
            }
        }
        updateUI();

        // LOBÄ° SÄ°STEMÄ°
        function renderLobbies() {
            const container = document.getElementById('lobbyContainer');
            container.innerHTML = "";
            const currentLobbies = JSON.parse(localStorage.getItem('real_lobbies')) || [];
            currentLobbies.forEach((l, index) => {
                const isAdmin = ADMINS.includes(localStorage.getItem('user'));
                container.innerHTML += `
                    <div class="lobby-item">
                        <span><b>${l.name}</b> (${l.owner})</span>
                        <div>
                            <button class="btn" style="padding:5px 10px;" onclick="enterLobby(${index})">KATIL</button>
                            ${isAdmin ? `<button class="btn" style="padding:5px 10px; border-color:yellow; color:yellow;" onclick="adminCloseLobby(${index})">KAPAT</button>` : ''}
                        </div>
                    </div>
                `;
            });
        }

        window.toggleView('createLobbyView'); // Bu kÄ±smÄ± silebilirsin, sadece lobi oluÅŸturma ekranÄ± iÃ§in.
        document.getElementById('createLobbyView').innerHTML = `
            <div style="text-align:center;">
                <h2 class="animated-text">LOBÄ° KUR</h2>
                <input type="text" id="l-name" placeholder="Lobi Ä°smi" style="width:300px; padding:10px; background:#111; color:white; border:1px solid #333;">
                <button class="btn" onclick="confirmCreate()">OLUÅžTUR</button>
            </div>
        `;

        function confirmCreate() {
            const name = document.getElementById('l-name').value;
            const owner = localStorage.getItem('user');
            if(!name) return;
            let current = JSON.parse(localStorage.getItem('real_lobbies')) || [];
            current.push({ name: name, owner: owner, players: [owner] });
            localStorage.setItem('real_lobbies', JSON.stringify(current));
            renderLobbies();
            toggleView('lobbyListView');
        }

        function enterLobby(idx) {
            const data = JSON.parse(localStorage.getItem('real_lobbies'))[idx];
            toggleView('chatView');
            document.getElementById('chatTitle').innerText = data.name;
            const pList = document.getElementById('playerList');
            pList.innerHTML = "";
            // Lobideki oyuncu (simÃ¼le ama profil gÃ¶rmeli)
            const isAdmin = ADMINS.includes(data.owner) ? '<span class="admin-tag">KURUCU</span>' : '';
            pList.innerHTML = `<div class="user-card" onclick="alert('Oyuncu: ${data.owner}')"><div class="pp-circle">?</div> ${data.owner} ${isAdmin}</div>`;
            
            // EÄŸer adminse ban tuÅŸu ekle
            if(ADMINS.includes(localStorage.getItem('user'))) {
                pList.innerHTML += `<button class="btn" style="font-size:10px; width:100%; margin-top:10px;" onclick="adminBan('${data.owner}')">OYUNCUYU BANLA</button>`;
            }
        }

        // ADMIN YETKÄ°LERÄ°
        function adminCloseLobby(idx) {
            let current = JSON.parse(localStorage.getItem('real_lobbies'));
            current.splice(idx, 1);
            localStorage.setItem('real_lobbies', JSON.stringify(current));
            renderLobbies();
        }

        function adminBan(user) {
            if(ADMINS.includes(user)) return alert("Bir admini banlayamazsÄ±n!");
            localStorage.setItem('isBanned', user);
            alert(user + " baÅŸarÄ±yla banlandÄ±.");
        }

        // AI Ã–ÄžRENME SÄ°STEMÄ°
        function aiProcess() {
            const inp = document.getElementById('ai-in');
            const val = inp.value;
            const box = document.getElementById('ai-content');
            if(!val) return;

            if(val.startsWith("Ã–ÄŸret:")) {
                const parts = val.replace("Ã–ÄŸret:", "").split("|");
                if(parts.length === 2) {
                    aiBrain[parts[0].trim().toLowerCase()] = parts[1].trim();
                    localStorage.setItem('ai_brain', JSON.stringify(aiBrain));
                    box.innerHTML += `<div><b>AI:</b> Bunu Ã¶ÄŸrendim! ArtÄ±k "${parts[0].trim()}" dersen "${parts[1].trim()}" diyeceÄŸim.</div>`;
                }
            } else {
                box.innerHTML += `<div><b>Sen:</b> ${val}</div>`;
                let answer = aiBrain[val.toLowerCase()] || "Bunu henÃ¼z bilmiyorum. Bana 'Ã–ÄŸret: soru | cevap' ÅŸeklinde Ã¶ÄŸretebilirsin!";
                setTimeout(() => {
                    box.innerHTML += `<div><b>AI:</b> ${answer}</div>`;
                    box.scrollTop = box.scrollHeight;
                }, 500);
            }
            inp.value = "";
        }

        function sendChat() {
            const val = document.getElementById('chatIn').value;
            if(!val) return;
            const user = localStorage.getItem('user');
            const isAdmin = ADMINS.includes(user) ? `<span class="admin-tag">KURUCU</span>` : '';
            document.getElementById('msgBox').innerHTML += `<div><b>${user} ${isAdmin}:</b> ${val}</div>`;
            document.getElementById('chatIn').value = "";
            document.getElementById('msgBox').scrollTop = document.getElementById('msgBox').scrollHeight;
        }
    </script>
</body>
</html>
