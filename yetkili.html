<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Yetkili Paneli | ArxonNetwork</title>

<style>
body {
  background:#0f2027;
  color:white;
  font-family:Arial;
  padding:30px;
}

h2, h3 {
  color:#7b6cff;
}

.box {
  background:rgba(0,0,0,0.5);
  padding:20px;
  border-radius:15px;
  max-width:450px;
  margin-bottom:30px;
}

input, button {
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:20px;
  border:none;
}

button {
  background:#00c6ff;
  font-weight:bold;
  cursor:pointer;
}

.app {
  background:rgba(0,0,0,0.6);
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
  border-left:4px solid #7b6cff;
}

.actions button {
  width:48%;
  margin-top:10px;
}

.ok { background:#00ff99; }
.no { background:#ff5555; }
</style>
</head>

<body>

<h2>ðŸ‘® Yetkili Paneli</h2>
<div id="adminName"></div>

<div class="box">
  <input id="target" placeholder="KullanÄ±cÄ± adÄ±">
  <input id="credit" type="number" placeholder="Verilecek kredi">

  <button onclick="giveCredit()">ðŸ’³ Kredi Ver</button>
  <button onclick="banUser()">â›” Banla</button>
  <button onclick="unbanUser()">âœ… Ban AÃ§</button>
  <button onclick="logout()">ðŸšª Ã‡Ä±kÄ±ÅŸ</button>
</div>

<h3>ðŸ›¡ AAC BaÅŸvurularÄ±</h3>
<div id="aacList"></div>

<hr style="opacity:0.3; margin:30px 0;">

<h3>ðŸ“˜ Rehber BaÅŸvurularÄ±</h3>
<div id="rehberList"></div>

<script>
/* ========== AUTH ========== */
const currentUser = localStorage.getItem("loginUser");
const admins = ["mehmety3232","syvex"];

if (!currentUser || !admins.includes(currentUser.toLowerCase())) {
  location.href="index.html";
}

adminName.innerText = "ðŸ‘¤ Yetkili: " + currentUser;

/* ========== USER ACTIONS ========== */
function giveCredit() {
  const u = target.value;
  const c = Number(credit.value);
  if (!u || !c) return alert("AlanlarÄ± doldur");

  const raw = localStorage.getItem("user_"+u);
  if (!raw) return alert("KullanÄ±cÄ± yok");

  const d = JSON.parse(raw);
  d.credit = (d.credit||0)+c;
  localStorage.setItem("user_"+u,JSON.stringify(d));
  alert("Kredi verildi");
}

function banUser() {
  const u = target.value;
  const raw = localStorage.getItem("user_"+u);
  if (!raw) return alert("KullanÄ±cÄ± yok");
  const d = JSON.parse(raw);
  d.banned = true;
  localStorage.setItem("user_"+u,JSON.stringify(d));
  alert("BanlandÄ±");
}

function unbanUser() {
  const u = target.value;
  const raw = localStorage.getItem("user_"+u);
  if (!raw) return alert("KullanÄ±cÄ± yok");
  const d = JSON.parse(raw);
  d.banned = false;
  localStorage.setItem("user_"+u,JSON.stringify(d));
  alert("Ban aÃ§Ä±ldÄ±");
}

/* ========== AAC BAÅžVURULAR ========== */
function loadAAC() {
  const list = JSON.parse(localStorage.getItem("aac_basvuru")) || [];
  const el = document.getElementById("aacList");
  el.innerHTML = "";

  if (!list.length) {
    el.innerHTML = "AAC baÅŸvurusu yok.";
    return;
  }

  list.forEach((b,i)=>{
    el.innerHTML += `
      <div class="app">
        <b>Nick:</b> ${b.nick}<br>
        <b>Kont:</b><br>${b.kont}<br><br>
        <b>Uygulamalar:</b><br>${b.uyg}<br>
        <small>ðŸ“… ${b.tarih}</small>

        <div class="actions">
          <button class="ok" onclick="setStatus('aac_basvuru',${i},'ok')">âœ” Onayla</button>
          <button class="no" onclick="setStatus('aac_basvuru',${i},'no')">âœ– Reddet</button>
        </div>
      </div>
    `;
  });
}

/* ========== REHBER BAÅžVURULAR ========== */
function loadRehber() {
  const list = JSON.parse(localStorage.getItem("rehber_basvuru")) || [];
  const el = document.getElementById("rehberList");
  el.innerHTML = "";

  if (!list.length) {
    el.innerHTML = "Rehber baÅŸvurusu yok.";
    return;
  }

  list.forEach((b,i)=>{
    el.innerHTML += `
      <div class="app">
        <b>Nick:</b> ${b.nick}<br>
        <b>Mesaj:</b><br>${b.metin}<br>
        <small>ðŸ“… ${b.tarih}</small>

        <div class="actions">
          <button class="ok" onclick="setStatus('rehber_basvuru',${i},'ok')">âœ” Onayla</button>
          <button class="no" onclick="setStatus('rehber_basvuru',${i},'no')">âœ– Reddet</button>
        </div>
      </div>
    `;
  });
}

/* ========== STATUS SET ========== */
function setStatus(key,index,status) {
  const list = JSON.parse(localStorage.getItem(key));
  list[index].status = status;
  localStorage.setItem(key,JSON.stringify(list));
  loadAAC();
  loadRehber();
}

/* ========== LOGOUT ========== */
function logout() {
  localStorage.removeItem("loginUser");
  location.href="login.html";
}

loadAAC();
loadRehber();
</script>

</body>
</html>
